<!DOCTYPE html>
<html>
    <head>
	    <title></title>
    </head>
    <body>
        <h1>Shopping Cart</h1>
        
        <script>
            var cart = []; 
            var Item = function(name, price, count) {
                this.name = name;
                this.price = price;
                this.count = count; 
            }; 

            function addItemToCart(name, price, count) {
                for (var i in cart) {
                    if (cart[i].name === name) { // .name if from Item in cart and === name if from addItemToCart(name)
                        cart[i].count += count; // Add count to whatever the value of count prop is. 
                        return; // This will end the function 
                    }
                }
                var item = new Item(name, price, count); //Executed only if we do not already find the item name in the cart
                cart.push(item); 
            }
           
            
            function removeItemFromCart(name) { // Removes one item by looking up the name
                for (var i in cart) {
                    if (cart[i].name === name) {
                        cart[i].count--; // cart[i].count = cart[i].count - 1; or cart[i].count -= 1; (same thing)
                        if (cart[i].count === 0) {
                            cart.splice(i, 1); // If count is 0 it removes item from cart completely. or you can put removeItemFromCartAll(); instead of using splice in this case. 
                        }
                        break; 
                    }
                }
            }
            

            function removeItemFromCartAll(name) { // Removes all of a particular item using name.
                for (var i in cart) {
                    if (cart[i].name === name) {
                        cart.splice(i, 1); 
                        break; 
                    }
                }
            }


            addItemToCart("Apple", 1.22, 1);
            addItemToCart("Pear", 1.72, 3);
            addItemToCart("Apple", 1.22, 1); // If we add item as same name as another existing item we need to update count of the existing item.
            addItemToCart("Apple", 1.22, 3);
            addItemToCart("Banana", 1.00, 1);
            addItemToCart("Car", 34.00, 1); 
            addItemToCart("Toy", 5.82, 1);
            addItemToCart("Notes", 4.00, 3);

            console.log(cart.length); // 6 items eventhough it shows 5 when opening it
            console.log(cart);

            removeItemFromCartAll("Car")

            console.log(cart.length); // 5 items and shows 5 when opening it
            console.log(cart);

            function clearCart() {  // Removes everything
                cart = [];
            }
            
            // clearCart(); 
            // console.log(cart);

            function countCart() {  // Count number of items in the cart (returns total count)
                var totalCount = 0;
                for (var i in cart) {
                    totalCount += cart[i].count
                }
                return totalCount; 
            } 

            console.log(countCart());

            function totalCart() {  // Total price of all the items (returns total cost)
                var totalCost = 0; 
                for (var i in cart) {
                    totalCost += cart[i].price
                }
                return totalCost; 
            } 

            console.log(totalCart());

            function listCart() {  // Returns an array of all items (displays it). This helps with debugging
                 var cartCopy = []; 
                 for (var i in cart) { // Looping through each item in the cart
                    var item = cart[i]; 
                    var itemCopy = {};
                    for (var p in item) { // Looping through each property of the item and make that a property in copy and give it the same value.
                        itemCopy[p] = item[p]; 
                    }
                    cartCopy.push(itemCopy); // Adding the itemcopy to the cartcopy
                 }
                 // If we do return cart.slice() we would get a copy of the cart array but the objects inside would be references to the same objects that we have in the original cart. That could cause problems. So slice method does not work since we are dealing with objects inside an array. 
                 return cartCopy; // so after looping is done we are creating a whole new array and every item in the array is going to be a copy a seperate obj from the original items in the original cart. 
                 // If you return cart; both arrays in console will say mistake. 
            }

            // console.log(listCart());

            /* var array = listCart(); // First item in first array does not say mistake but first item in the second array does not day mistake. so we know new array is a copy of original and not a reference. 
            array[0].name = "Mistake"; 
            console.log(array); */

            /* var a = ["A", "B", "C"]; 
            var b = a.slice(); // slice method w/out parameters is used to create a copy of array a for b. So now b is a copy and a new array. // When slice is not used, It does not create a copy of a. It instead passes a reference to a. So it gives you the original array. We don't want our original array to be modified. This could cause a problem. 
            b.push("D"); 
            console.log(a); // same thing. b is same a 
            console.log(b); // same thing. a is same as b */

            /* var a = {age:22, name:"joe"};
            var b = a; 
            b.name = "cindy"; 
            console.log(a);
            console.log(b); */ // Can't use slice with the objects? 

            // saveCart()

            // loadCart()  

        </script>
    </body>
</html>